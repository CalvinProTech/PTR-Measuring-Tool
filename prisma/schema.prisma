generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model PricingSettings {
  id                     String   @id @default(cuid())
  costPerSqFt            Float    @default(5.0)
  targetProfit           Float    @default(2000)
  gutterPricePerFt       Float    @default(15.0)
  tier1DealerFee         Float    @default(0)
  tier2DealerFee         Float    @default(0.10)
  tier3DealerFee         Float    @default(0.15)
  solarPanelPricePerUnit Float    @default(150.0)
  skylightPricePerUnit   Float    @default(200.0)
  satellitePricePerUnit  Float    @default(75.0)
  updatedAt              DateTime @updatedAt
  updatedBy              String?
}

model TrainingDocument {
  id          String   @id @default(cuid())
  name        String
  filename    String
  storedName  String   @unique
  type        String
  category    String
  description String?
  fileSize    Int
  uploadedAt  DateTime @default(now())
  uploadedBy  String
}

model Bulletin {
  id           String               @id @default(cuid())
  title        String
  content      String               @db.Text
  publishDate  DateTime             @default(now())
  createdAt    DateTime             @default(now())
  updatedAt    DateTime             @updatedAt
  createdBy    String
  readStatuses BulletinReadStatus[]

  @@index([publishDate])
}

model BulletinReadStatus {
  id         String   @id @default(cuid())
  bulletinId String
  userId     String
  readAt     DateTime @default(now())
  bulletin   Bulletin @relation(fields: [bulletinId], references: [id], onDelete: Cascade)

  @@unique([bulletinId, userId])
  @@index([userId])
}
